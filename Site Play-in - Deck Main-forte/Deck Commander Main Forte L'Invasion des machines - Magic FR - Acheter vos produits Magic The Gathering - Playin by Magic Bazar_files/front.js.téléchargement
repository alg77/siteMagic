function googleSignOut(){let auth2=gapi.auth2.getAuthInstance();auth2.signOut().then(function(){console.log('User signed out.');});}
(function($){function launchRotator(){var InfiniteRotator={init:function(){var initialFadeIn=1000;var itemInterval=5000;var numberOfItems=$('.rotating_item').length;var infiniteLoop=null;var currentItem=$('#rotating_item_wrapper').data('position')-1;function rotateBanner(){var width=window.innerWidth;if(width<=1023){$('.rotating_item').eq(currentItem).fadeOut(0);}else{$('.rotating_item').eq(currentItem).fadeOut(1500);}
if(currentItem==numberOfItems-1){currentItem=0;}else{currentItem++;}
if(width<=1023){$('.rotating_item').eq(currentItem).fadeIn(0);}else{$('.rotating_item').eq(currentItem).fadeIn(1500);}
activButton();}
function activButton(){var number=$('.rotating_item').eq(currentItem).data('number');$('.btn_pub_number ').removeClass('btn_active');$('.btn_pub_number_'+(number)).addClass('btn_active');$('.rotating_item ').removeClass('img_active');$('.rotating_item_'+(number)).addClass('img_active');}
$('.rotating_item').eq(currentItem).fadeIn(initialFadeIn);$('.btn_pub_number').on('click',function(){var img_show=$(this).data('img');clearInterval(infiniteLoop);$('.rotating_item').eq(currentItem).hide();currentItem=img_show;$('.rotating_item').eq(currentItem).show();activButton();});infiniteLoop=setInterval(rotateBanner,itemInterval);}};InfiniteRotator.init();return InfiniteRotator;};function headerFixed(){var scroll=$(window).scrollTop();var height=$(window).height();var width=window.innerWidth;if(width>1023&&$('#rotating_item_wrapper').length!=0){if(scroll<182){$('.container_top_header').removeClass('container_top_without_banner');$('#small_part').removeClass('small_part_without_banner');$('#scroll_header').removeClass('scroll_header_without_banner');$('.navbar_top').removeClass('navbar_top_without_banner');}else if(scroll>=182){$('.container_top_header').addClass('container_top_without_banner');$('#small_part').addClass('small_part_without_banner');$('#scroll_header').addClass('scroll_header_without_banner');$('.navbar_top').addClass('navbar_top_without_banner');}}
if(width>1023){$('.slide_top').css('height','43px');}
if(width<=1023){if(scroll>32){$('.container_first_line_header').css('display','none');$('#header_mobile_fixed').css('position','fixed');$('#header_mobile_fixed').css('top','0');}else if(scroll<=32){$('.container_first_line_header').css('display','block');$('#header_mobile_fixed').css('position','relative');}
$('.slide_top').css('height','88px');}
if($('.container_navbar_mobile')){var scroll_menu=scroll+'px';$('.container_navbar_mobile').css('top',scroll_menu);}
if(scroll>height){$('.backToTop').show();}else if(scroll<=height){$('.backToTop').hide();}
var responsiv=0;if(1350<width){responsiv=128;}else if(1350>width&&1024<=width){responsiv=118;}else if(1024>width&&768<=width){if(0==scroll){responsiv=108;}else if(32>=scroll){responsiv=108-scroll;}else{responsiv=73;}}
if(($('.container_recap_cart').length==2&&(scroll+responsiv)>$('.container_cart_product').offset().top)){if(!$('#fixed_recap_cart_product').hasClass('only_fixed')){$('#fixed_recap_cart_product').addClass('fixed_scroll_recap_cart');}}else if(($('.container_recap_cart').length==2&&(scroll+responsiv)<=$('.container_cart_product').offset().top)){if($('#fixed_recap_cart_product').hasClass('fixed_scroll_recap_cart')){$('#fixed_recap_cart_product').removeClass('fixed_scroll_recap_cart');}}
if($('#footer').offset().top-30<=$('.fixed_scroll_recap_cart').outerHeight()+responsiv+scroll){$('.fixed_scroll_recap_cart ').css('top',responsiv-(($('.fixed_scroll_recap_cart ').outerHeight()+responsiv+scroll)-($('#footer').offset().top-30)));}else{if(scroll>=$('#wrapper').offset().top-responsiv){$('.fixed_scroll_recap_cart ').css('top',responsiv);}else{$('.fixed_scroll_recap_cart ').css('top',$('#wrapper').offset().top-scroll);}}
if(1024<width){if((scroll+140)>431){$('#fixed_sell_cart').addClass('fixed');}else if((scroll+140)<=431){$('#fixed_sell_cart').removeClass('fixed');}
if($('#footer').offset().top-30<=$('#fixed_sell_cart').outerHeight()+145+scroll){$('#fixed_sell_cart').css('top',145-(($('#fixed_sell_cart').outerHeight()+145+scroll)-($('#footer').offset().top-30)));}else{$('#fixed_sell_cart').css('top',130);}}
if(width<=767){$('.container_day_event').each(function(){var idDiv=$(this).data('day');var heightDiv=$(this).height();var topDiv=$(this).offset().top;var widthDiv=$('#day_event_'+idDiv).innerWidth();if(scroll>=(topDiv-63)&&scroll<(topDiv+heightDiv-153)){$('.bloc_day_event').css('position','inherit');$('#day_event_'+idDiv).css('position','fixed');$('#day_event_'+idDiv).css('top','61px');$('#bloc_events_'+idDiv).css('position','relative');$('#bloc_events_'+idDiv).css('left',widthDiv);}else if(scroll>=(topDiv+heightDiv-153)){$('.bloc_day_event').css('position','inherit');$('.bloc_events').css('position','inherit');}else if(scroll<(topDiv-63)){$('#day_event_'+idDiv).css('position','inherit');$('#bloc_events_'+idDiv).css('position','inherit');}});}}
function toogleProductExt(){var width=window.innerWidth;if(1350<=width){$('.item_computer_2').toggle();$('html,body').scrollTop(0);}else if(1350>width){$('.item_computer').toggle();$('html,body').scrollTop(0);}else if(1024>width){$('.item_tablette').toggle();$('html,body').scrollTop(0);}else if(768>width){$('.item_mobile').toggle();$('html,body').scrollTop(0);}};function showProductExt(){var width=window.innerWidth;if(1350<=width){$('.container_list_last_ext .item').css('display','block');$('.container_list_last_ext .item_computer_2').css('display','none');}else if(1350>width&&1023<width){$('.container_list_last_ext .item').css('display','block');$('.container_list_last_ext .item_computer').css('display','none');}else if(1024>width&&767<width){$('.container_list_last_ext .item').css('display','block');$('.container_list_last_ext .item_tablette').css('display','none');}else if(768>width){$('.container_list_last_ext .item').css('display','block');$('.container_list_last_ext .item_mobile').css('display','none');}};function showListExt(){var width=window.innerWidth;if(1350<=width){$('.container_list_last_ext .bloc_ext_tablet').css('display','block');if(1432>=width){$('.container_home .container_list_last_ext .extension_yugi .bloc_ext_tablet').css('display','none');}
$('.container_home .container_list_last_ext .extension_yugi .bloc_ext_tablet_2').css('display','none');}else if((1350>width&&1023<width)&&$('.container_family').length>0){$('.container_list_last_ext .item').css('display','block');$('.container_list_last_ext .bloc_ext_tablet').css('display','none');}else if((1350>width&&1023<width)&&$('.container_edition_1').length>0){$('.container_list_last_ext .item').css('display','block');$('.container_list_last_ext .bloc_ext_computer').css('display','none');}else if((1024>width&&768<=width)&&$('.container_family').length>0){$('.container_list_last_ext .item').css('display','block');$('.container_list_last_ext .bloc_ext_tablet_2').css('display','none');}else if((1024>width&&768<=width)&&$('.container_edition_1').length>0){$('.container_list_last_ext .item').css('display','block');$('.container_list_last_ext .bloc_ext_tablet_2').css('display','none');}};function showListCat(){var width=window.innerWidth;if(1350<=width){$('.container_list_cat .item').css('display','block');$('.container_list_cat .item_computer_2').css('display','block');$('.container_list_cat .item_computer').css('display','none');}else if((1350>width&&1023<width)&&$('.container_home').length>0){$('.container_list_cat .item').css('display','block');$('.container_list_cat .item_computer_2').css('display','none');}};headerFixed();$(window).scroll(headerFixed);$(window).resize(headerFixed);$(window).resize(showProductExt);$(window).resize(showListExt);$(window).resize(showListCat);$(window).on("orientationchange",function(){headerFixed()});$(document).on('mouseleave','.menu_selected',function(e){if(!e&&window.event)e=event;var goingto=e.relatedTarget||event.toElement;if((' '+goingto.className+' ').indexOf(' '+'menu_selected'+' ')>-1){return;}
$('.case_navbar_top').removeClass('menu_selected');$('.drop_down_menu').removeClass('menu_selected');});$('.case_navbar_top').mouseenter(function(e){var data=$(e.target).attr('data-target');$('.case_navbar_top').removeClass('menu_selected');$('.drop_down_menu').removeClass('menu_selected');$(this).addClass('menu_selected');$('#'+data).addClass('menu_selected');});$('.case_navbar_top').parent().bind('touchstart',function(e){var data=$(this).find('.case_navbar_top').attr('data-target');if($('#'+data).length>0&&$(this).find('.menu_selected').length==0){e.preventDefault();}
$('.case_navbar_top').removeClass('menu_selected');$('.drop_down_menu').removeClass('menu_selected');$(this).find('.case_navbar_top').addClass('menu_selected');$('#'+data).addClass('menu_selected');});function flyingToCart(product){var offset=product.offset();var windowWidth=window.innerWidth;if(windowWidth<768)return;product.clone().addClass('product-clone').css({'left':offset.left+'px','top':parseInt(offset.top-$(window).scrollTop())+'px','width':product.width()+'px','height':product.height()+'px'}).appendTo(product.parent());if(windowWidth>=1024){var cart=$('.cart_top .cart_top_img').offset();}else if(windowWidth<1024&&windowWidth>=768){var cart=$('#header_mobile_fixed .cart_top .cart_top_img').offset();}else{}
$('.product-clone').animate({top:parseInt(cart.top-$(window).scrollTop())+'px',left:cart.left+'px','height':'0px','width':'0px'},800,function(){$(this).remove();});}
function delay(callback,ms){let timer=0;return function(){let context=this,args=arguments;clearTimeout(timer);timer=setTimeout(function(){callback.apply(context,args);},ms||0);};}
$(document).ready(function(){$('body').on("click",'.backToTop',function(){$('html,body').animate({scrollTop:0});});var ajax_loader=new Image();ajax_loader.src='/img/style/loading_spinner.gif';$('body').on('click','.filterMdlHome',function(){$length=$('#sliderCircle .MS-content .item:visible').length;if($length<6){$('#sliderCircle .MS-controls').hide();}else{$('#sliderCircle .MS-controls').show();}});launchRotator();$('body').on("click",'.toggleTarget',function(){$target=$(this).data('target');$('.'+$target).toggle();});$('body').on("click",'.slideToggleTarget',function(){$target=$(this).data('target');$('.'+$target).slideToggle();});$('body').on("click",'.hideShowFooter',function(){var windowWidth=window.innerWidth;if(windowWidth<1024){$target=$('.'+$(this).data('target'));if($target.is(':visible')){$target.slideUp(300);}else{$target.slideDown(300);}}});$('body').on("click",'#show_searchbar_mobile',function(){if($('#searchbar_mobile').is(':visible')){$('.container_form_mobile').slideUp(300);}else{$('.container_form_mobile').slideDown(300);}});$('body').on("click",'.show_menu_mobile',function(){var menu=$(this).data('menu');var current=$(this).data('current');var scroll=$(window).scrollTop();var height=$('#menu_'+menu).height();$('body').css('height','100%');$('.body_background_mobile').css('display','flex');$('.container_navbar_mobile').css('display','block');if(scroll>0){var scroll_menu=scroll+'px';$('#menu_'+menu).css('top',scroll_menu);}
$('#menu_'+menu).addClass('navbar_slideIn');$('#menu_'+menu).removeClass('navbar_slideOut');if(''!=current){$('#menu_'+current).addClass('navbar_slideOut');$('#menu_'+current).removeClass('navbar_slideIn');}});$('body').on("click",'.show_desc',function(){var lang=$(this).data('lang');if($('.long_desc_edition').hasClass('hide')){$('.long_desc_edition').removeClass('hide');$('.short_desc_edition').addClass('hide');if('fr'==lang){$('.btn_tout_voir').html('Masquer la suite');}else if('en'==lang){$('.btn_tout_voir').html('');}}else{$('.short_desc_edition').removeClass('hide');$('.long_desc_edition').addClass('hide');if('fr'==lang){$('.btn_tout_voir').html('Lire la suite');}else if('en'==lang){$('.btn_tout_voir').html('');}}});$('body').on("click",'.onclickTab',function(){var tab=$(this).data('tab');if(!$(this).hasClass("title_selected")){$(".onclickTab").removeClass("title_selected");$(this).addClass("title_selected");$(".bloc_tab").removeClass("tab_selected");$(".bloc_tab").addClass("tab_hidden");$(".tab_"+tab).removeClass("tab_hidden");$(".tab_"+tab).addClass("tab_selected");}});$('body').on("click",'.showPopupHeader',function(){var target=$(this).data('target');if($('#'+target).css('display')=='block'){$('#'+target).hide();}else{$('#'+target).show();}});$('body').on('click','.togglePopup',function(e){var target=$(this).data('target');if($('.'+target).hasClass('hide')){$('.'+target).removeClass('hide');$('.'+target).addClass('show');}else{$('.'+target).removeClass('show');$('.'+target).addClass('hide');}});$(document).mouseup(function(e){if($(e.target).hasClass('clicOutPopup')||$(e.target).parents('.clicOutPopup').length!=0){return;}else{$('.boxTogglePopup').removeClass('show');$('.boxTogglePopup').addClass('hide');}});$('body').on("click",'.showPopup',function(e){var idTarget=$(this).data('target');var target='boxToggle'+idTarget;var parentHeight=$('#event'+idTarget).height();;$ymouse=e.clientY;$docHeight=$(window).height();$targetHeight=$('#'+target).height();if($('#'+target).css('display')=='block'){$('.boxToggle').hide();}else{$('.boxToggle').hide();if(($ymouse+$targetHeight+30)<$docHeight){$('.img_bot').addClass('img_hidden');$('.img_top').removeClass('img_hidden');$('#'+target).show();}else{$('.img_top').addClass('img_hidden');$('.img_bot').removeClass('img_hidden');$top='-'+($targetHeight+parentHeight)+'px';$top_arrow=($targetHeight-4)+'px';$('#'+target).css('top',$top);$('#img_bot_'+target).css('top',$top_arrow);$('#'+target).show();}}});$('body').on('click','.showTarget',function(){var arrow=$(this).data('arrow');var target=$(this).data('target');var scroll=$(this).data('scroll');$('#'+target).toggle();if(!$('#'+target).is(":visible")&&(1==scroll)){$('html, body').scrollTop($('#'+target).offset().top);}
if($('.up'+arrow).hasClass('hide_arrow')){$('.up'+arrow).removeClass('hide_arrow');$('.down'+arrow).addClass('hide_arrow');}else{$('.up'+arrow).addClass('hide_arrow');$('.down'+arrow).removeClass('hide_arrow');}});$('body').on('click','.showhide_ext',function(){var target=$(this).data('target');$('.'+target).removeClass('hide');$(this).addClass('hide');});$('body').on('click','.showhide_product_ext',toogleProductExt);$('body').on("click",'.hide_menu_mobile',function(){$('.container_navbar_mobile').addClass('navbar_slideOut');$('.container_navbar_mobile').removeClass('navbar_slideIn');$('.body_background_mobile').css('display','none');$('body').css('overflow-y','auto!important');});$(document).mouseup(function(e){if($(e.target).hasClass('container_navbar_mobile')||$(e.target).parents('.container_navbar_mobile ').length!=0){}else{$('.container_navbar_mobile').addClass('navbar_slideOut');$('.container_navbar_mobile').removeClass('navbar_slideIn');$('.body_background_mobile').css('display','none');}});$(document).mouseup(function(e){if($(e.target).hasClass('headerClicOut')||$(e.target).parents('.headerClicOut').length!=0){}else{$('#headerStoreToggle, #mobileBoxToggle, #headerBoxToggle').hide();}
if($(e.target).hasClass('container_autocompletion')||$(e.target).parents('.container_autocompletion').length!=0){}else{$('#container_autocompletion').hide();}});$(document).mouseup(function(e){if($(e.target).hasClass('clicOut')||$(e.target).parents('.clicOut').length!=0){return;}else{$('.boxToggle').hide();}});$(".onHoverImg").hover(function(){var width=window.innerWidth;if(width>1023){$urlImg=$(this).data("img");$imgTitle=$(this).data("title");if($imgTitle==undefined){$html="<img src='"+$urlImg+"' loading='lazy'/>";}else{$html="<span class='onhover_title'>"+$imgTitle+"</span>"+"<img src='"+$urlImg+"' loading='lazy' />";}
$("#popup").html($html);$("#popup").show();}},function(){$("#popup").hide();});$('.showVisuel').on('click',function(){$('.img_card_visuel').each(function(){if($(this).attr('src')==''){$img=$(this).data('img');$name=$(this).data('name');$(this).attr('src',$img);$(this).attr('alt',$name);}});});$('.btn_cart_sell_mini').on('click',function(){let sell_limit=$("#sell_recap").data('multi');let sell_row=$("#sell_recap .tr").length;if(sell_row==(sell_limit-1)){window.location.reload();}});$('body').on("click",'.multi_btn',function(){$multi=$(this).data('multi');if($('.multi_btn_'+$multi).hasClass('selected')){return;}else{$('.multi_btn').removeClass('selected');$('.multi_btn_'+$multi).addClass('selected');$('.multi').removeClass('selected');$('.multi').addClass('hide');$('.multi_'+$multi).removeClass('hide');$('.multi_'+$multi).addClass('selected');}});$('body').on("click",'.subscribeNewsletter',function(){var news=$(this).data("news");var lang=$(this).data("lang");var name="subscribeNewsletter"+news;if($('#'+name).hasClass('selected')){$selected=1;}else{$selected=0;}
$.ajax({url:'/api/newsletter.php',data:{'id_newsletter':news,'selected':$selected},dataType:'html',success:function(html){if(html==1){$('#'+name).addClass('selected');if('fr'==lang){alert("Merci pour votre inscription !");}else if('en'==lang){alert("Thank you for subscribing");}}else{$('#'+name).removeClass('selected');if('fr'==lang){alert("Votre désincription a bien été prise en compte !");}else if('en'==lang){alert("Your unsubscription has been processed!");}}},error:function(html){console.log("error subscribe newsletter");}});});$('body').on('input','#main_search_header',delay(function(){var search=$(this).val();var url='/api/autocompletion.php';$.ajax({url:url,data:{'search':search},dataType:'html',success:function(html){if(html!=""){$("#container_autocompletion").show();$("#result_autocompletion").html(html);}},error:function(html){}});},250));$('body').on("change",'.api_ext',function(){var selected=$(this).find('option:selected');var cas=selected.data('cas');var sens=selected.data('sens');var target='container_list_allext';var url='/api/extension.php';var limit=$(this).data('limit');$.ajax({url:url,data:{'cas':cas,'sens':sens,'limit':limit},dataType:'html',success:function(html){$('#'+target).html(html);}});});$('body').on('change','.update_qty_cart',function(){var lang=$(this).data('lang');var id=$(this).data('id');var qty=parseFloat(this.value);$.ajax({url:'/api/update_qty.php',data:{'id':id,'qty':qty,'localisation':$(this).data('localisation')},dataType:'html',success:function(html){window.location=window.location.href;}});});$('body').on('change','.update_qty_cart_sell',function(){var lang=$(this).data('lang');var url='/api/update_qty_sell.php';var id=$(this).attr('data-id');var name=$(this).attr('data-name');$price=parseFloat($(this).attr('data-price'));$oldQty=parseFloat($(this).attr('data-qty'));$qty=parseFloat(this.value);$id_cart=$('.recap_cart_total').attr('data-idCart');$oldTotalCart=parseFloat($('.recap_cart_total').attr('data-total'));$oldCount=parseFloat($('.recap_cart_total').attr('data-count'));$oldTotalVoucher=parseFloat($('.recap_cart_total').attr('data-totalVoucher'));$voucher=parseFloat($('.recap_cart_total').data('voucher'));$oldTotalItem=($price*$oldQty).toFixed(2);$totalItem=($price*$qty).toFixed(2);$totalCart=($oldTotalCart-$oldTotalItem+parseFloat($totalItem)).toFixed(2);$count=$oldCount-$oldQty+$qty;$voucherOldItem=((Math.floor($price*$voucher*100)/100)*$oldQty).toFixed(2);$voucherNewItem=((Math.floor($price*$voucher*100)/100)*$qty).toFixed(2);$totalVoucher=($oldTotalVoucher-$voucherOldItem)+parseFloat($voucherNewItem);$.ajax({url:url,data:{'id_cart':$id_cart,'id_product':id,'qty':$qty},dataType:'html',success:function(html){$('.select_'+id).attr('data-qty',$qty);$('.total_item_'+id).text($totalItem.toString().replace('.',','));$('.nbr_article_sell').text($count);$('.recap_cart_total').attr('data-count',$count);$('.recap_cart_total').attr('data-total',$totalCart);$('.recap_cart_total').attr('data-totalVoucher',$totalVoucher.toFixed(2));$('.total_cart_sell').text($totalCart.toString().replace('.',','));$('#total_cart_sell_header').text($totalCart.toString().replace('.',','));$('.total_voucher_sell').text($totalVoucher.toFixed(2).toString().replace('.',','));if($qty!=html){if('fr'==lang){$('.msg_error_update_api').text('<div class="bag-red">La quantité maximale a été atteinte pour l\'article "'+name+'"</div>');}else if('en'==lang){$('.msg_error_update_api').text('<div class="bag-red">The maximum quantity has been reached for the article "'+name+'"</div>');}
$('.select_'+id).val(html);}
$('.total_cart_sell_header').text($totalCart.toString().replace('.',','));}});});$('body').on('change','.update_variation_sell',function(){var name=this.value;var id_var=$(this).attr('data-variation');var id_prod=$(this).find(':selected').attr('data-id');var price=parseFloat($(this).find(':selected').attr('data-prix'));var foil=$(this).find(':selected').attr('data-foil');$('.price_'+id_var).text(price.toFixed(2).replace('.',','));$('.input_id_'+id_var).val(id_prod);var button=$('.input_id_'+id_var).parent().children('.container_btn.bloc_cart').children('button:first');button.attr('data-id',id_prod);$('.input_price_'+id_var).val(price);if('N'==foil){$('.card_'+id_var).attr('data-foil','N');$('#select_'+id_var).removeClass('select_contain_foil');}else{$('.card_'+id_var).attr('data-foil','O');$('#select_'+id_var).addClass('select_contain_foil');}});$('body').on("submit",'#newsletter_footer_form',function(e){e.preventDefault();var lang=$(this).data('lang');var email=$('#mail_address_news_footer').val();var url='/api/newsletter.php';$.ajax({url:url,data:{'email':email},dataType:'html',success:function(html){if(html.charAt(0)=='1'||html.charAt(1)=='1'){$('#mail_address_news_footer').val("");if('fr'==lang){alert("Merci pour votre inscription !");}else if('en'==lang){alert("Thank you for subscribing");}
$('#mail_address_news_footer').css('background','');}else{$('#mail_address_news_footer').css('background','red');}}});});$('body').on('click','.api_event',function(){var lang=$(this).data('lang');var verif=$(this).attr('data-verif');var id=$(this).data('event');var cas=$(this).data('case');var api=$(this).data('api');var url='/api/'+api+'.php';var price_event=$(this).attr('data-price');var total_cart=$(this).attr('data-total');if(cas=='cart'){var header=$(this).data('header');if('fr'==lang){var confirmed=confirm('Êtes-vous sûr de vouloir supprimer cet événement ?');}else if('en'==lang){var confirmed=confirm('Do you really want to remove this event?');}
if(confirmed){$.ajax({url:url,data:{'id':id,'verif':verif,'price':price_event},dataType:'html',success:function(html){if(1==html||-1==html){$new_total_all=(parseFloat(header)+parseFloat(total_cart))-parseFloat(price_event);$new_total_cart=parseFloat(total_cart)-parseFloat(price_event);if(-1==html){$('#part_event_cart').css('display','none');location.reload();}else{$('#table_cart_'+id).css('display','none');$('.api_event').attr('data-total',$new_total_cart.toFixed(2));$('.sstotal_cart_event').text($new_total_cart.toFixed(2).toString().replace('.',','));}
$('#value_total_cart').text($new_total_all.toFixed(2).toString().replace('.',','));}},error:function(html){}});}}else{$.ajax({url:url,data:{'id':id,'verif':verif,'price':price_event},dataType:'html',success:function(html){if(1==html||-1==html){el=$('#btn_validate_'+id);if($('#btn_validate_'+id).hasClass('event_not_valid')){$('#container_'+id).attr('data-verif',1);el.addClass('waiting_payed');$('#img_'+id).addClass('btn_logo_wallet');$('#img_'+id).removeClass('btn_logo_cart');if('fr'==lang){$('#btn_'+id).html('Paiement en attente');}else if('en'==lang){$('#btn_'+id).html('Payment pending');}
$('#btn_validate_'+id).addClass('event_already_valid');$('#btn_validate_'+id).removeClass('event_not_valid');$total=parseFloat(total_cart)+parseFloat(price_event);$('.api_event').attr('data-total',$total.toFixed(2));$('#value_total_cart').text($total.toFixed(2).toString().replace('.',','));if(cas=='single_event'){flyingToCart($('.container_title_img'));}else{flyingToCart($('#container_'+id).parents('.event'));}
document.location.href='https://'+location.hostname+'/order/cart.php';}else if($('#btn_validate_'+id).hasClass('event_already_valid')){$('#container_'+id).attr('data-verif',0);el.removeClass('waiting_payed');$('#img_'+id).addClass('btn_logo_cart');$('#img_'+id).removeClass('btn_logo_wallet');if('fr'==lang){$('#btn_'+id).html('Réserver');}else if('en'==lang){$('#btn_'+id).html('Book now');}
$('#btn_validate_'+id).addClass('event_not_valid');$('#btn_validate_'+id).removeClass('event_already_valid');$total=parseFloat(total_cart)-parseFloat(price_event);$('.api_event').attr('data-total',$total.toFixed(2));$('#value_total_cart').text($total.toFixed(2).toString().replace('.',','));}}},error:function(html){}});}});$('body').on('click','.cancel_voucher_cart',function(){var voucher=$(this).data('voucher');var user=$(this).data('user');var url='/api/cancel_voucher_cart.php';var lang=$(this).data('lang');if('fr'==lang){var answer=confirm('Êtes-vous sûr de vouloir retirer ce bon d\'achat ?');}else if('en'==lang){var answer=confirm('Do you really want to remove this store credit voucher?');}
if(answer){$.ajax({url:url,data:{'voucher':voucher,'user':user},dataType:'html',success:function(html){$('#voucher_'+voucher).remove();$('#voucher_recap_cart').remove();if($("#coupon_recap_cart").length==0){$('#separateur_recap_cart').remove();$('.rest_total_cart').remove();$('#left_to_pay').remove();}
window.location.href=window.location.href;},error:function(html){}});}})
$('body').on('click','.cancel_coupon_cart',function(){var order=$(this).data('order');var coupon=$(this).data('coupon');var url='/api/cancel_coupon_cart.php';$.ajax({url:url,data:{'order':order},dataType:'html',success:function(html){$('#coupon_'+coupon).remove();$('#coupon_recap_cart').remove();if($('#voucher_recap_cart').length==0){$('#separateur_recap_cart').remove();$('.rest_total_cart').remove();$('#msg_discount_coupon').remove();$('#left_to_pay').remove();}
window.location.href=window.location.href;},error:function(html){}});})
$('body').on('click','.accept_cookies',function(){var url='/api/cookies.php';$.ajax({url:url,dataType:'html',success:function(html){$('.banner_accept_cookies').remove();},error:function(html){}});})
function filter(){$('.filterElement').show();$('.filterCategory').show();$btns_all=$('.filterAll:not(.selected)');if($btns_all.length!=0){$btns_all.each(function(){$filters=$('.'+$(this).data("link")+".selected");var $tmp="";$filters.each(function(){$tmp+=$(this).data("show")+",";});$tmp=$tmp.slice(0,-1);$('.filterElement').not(''+$tmp).hide();});}
$('.filterCategory').each(function(){$countElement=$(this).find('.filterElement:visible').length;if($countElement==0){$(this).hide();}else{$("#"+$(this).data("count")).html(""+$countElement);}});}
filter();$('body').on('click','.filterBtn',function(){if($(this).hasClass('filterAll')){if($(this).hasClass('selected'))return;$('.'+$(this).data("link")).removeClass("selected");$('.'+$(this).data("link")+'.filterAll').addClass("selected");}else{if($(this).hasClass('selected')){$(this).removeClass("selected");if($('.'+$(this).data("link")+".selected").length==0){$('.'+$(this).data("link")+".filterAll").addClass("selected");}}else{$btnAll=$('.'+$(this).data("link")+".filterAll");$btnAll.removeClass("selected");$(this).addClass("selected");}}
filter();});$('body').on('click','.delete_tag',function(){let val=$(this).attr("name");if($(".chkbox option").is(':selected')){$(".chkbox option[value='"+val+"']").prop("selected",false);}
$(this).closest("form").submit();if($(".chkbox").is(":checked")){$(":checkbox[value='"+val+"']").prop("checked",false);}
else{$(":checkbox[value='"+val+"']").prop("checked",true);}
$(this).closest("form").submit();});$('body').on('change','.submitOnChange',function(){$name=$(this).attr("name");if($(this).hasClass("submitAll")){$("input[name='"+$name+"']").prop('checked',false);$(this).prop('checked',true);}else{$("input.submitAll[name='"+$name+"']").prop('checked',false);}
$(this).closest("form").submit();});$('body').on('submit','.ignoreEmptyField',function(){$(this).find("input,select").each(function(index,obj){if($(obj).val()==""){$(obj).remove();}});});$('body').on('click','.filterLang',function(){$('.filterLang').removeClass('selected');$(this).addClass('selected');$lang=$(this).data('lang');$('.table_cards_color').each(function(){$table=$(this);var rows=$table.find('.cards').get();rows.sort(function(a,b){var keyA=$(a).attr('attribute_'+$lang);var keyB=$(b).attr('attribute_'+$lang);var order=keyA.localeCompare(keyB);return order;return 0;});$.each(rows,function(index,row){$table.append(row);});});$('.titre_card').hide();$('.titre_card_'+$lang).show();});$('body').on('click','.filterVisuel',function(){$('.filterVisuel').removeClass('selected');$(this).addClass('selected');$visuel=$(this).data('visuel');if('texte'==$visuel){$('.table_cards').show();$('.container_cards').hide();}else if('visuel'==$visuel){$('.table_cards').hide();$('.container_cards').show();}});$('body').on('click','.filterFilter',function(){if($(this).hasClass("selected")){return;}
$('.filterFilter').removeClass('selected');$(this).addClass('selected');$data=$(this).data('filter');if('yes'==$data){$('#cardFilter').slideDown(300);}else if('no'==$data){$('#cardFilter').slideUp(200);}});$('.filterTxtCard').on('click',function(){$lang=$(this).data('lang');$lang2=$(this).data('lang2');if(!$('.filter_'+$lang).hasClass('selected')){$('.filter_'+$lang).addClass('selected');$('.filter_'+$lang2).removeClass('selected');if($('.txt_'+$lang2+'_right').hasClass('img_hidden')){$('.txt_'+$lang2+'_back').addClass('img_hidden');$('.txt_'+$lang+'_back').removeClass('img_hidden');}else{$('.txt_'+$lang2+'_right').addClass('img_hidden');$('.txt_'+$lang+'_right').removeClass('img_hidden');}}});$('body').on('change','.sortCards',function(){var selected=$(this).find('option:selected');$sort=selected.data('sort');$order=selected.data('order');$('.table_cart_card').each(function(){$table=$(this);var rows=$table.find('.cards').get();rows.sort(function(a,b){var keyA=$(a).attr('attribute_'+$sort);var keyB=$(b).attr('attribute_'+$sort);if($order=='desc'){var new_order=keyB.localeCompare(keyA);}else if($order=='desc_int'){var new_order=parseFloat(keyB)-parseFloat(keyA);}if($order=='asc'){var new_order=keyA.localeCompare(keyB);}else if($order=='asc_int'){var new_order=parseFloat(keyA)-parseFloat(keyB);}
return new_order;});$.each(rows,function(index,row){$table.append(row);});});});$('body').on("click",'.turnCard',function(){$turn=$(this).data('turn');$turn2=$(this).data('turn2');$('.img_card_'+$turn).addClass('img_hidden');$('.turn_'+$turn).addClass('img_hidden');$('.img_card_'+$turn2).removeClass('img_hidden');$('.turn_'+$turn2).removeClass('img_hidden');if($('.filter_fr').hasClass('selected')){$('.txt_fr_'+$turn).addClass('img_hidden');$('.txt_fr_'+$turn2).removeClass('img_hidden');}else{$('.txt_en_'+$turn).addClass('img_hidden');$('.txt_en_'+$turn2).removeClass('img_hidden');}});jQuery(function($){$('.js-countdown').each(launchCountdown);});function launchCountdown(){var $this=$(this),finalDate=$(this).data('countdown');var lang=$(this).data('lang');$this.countdown(finalDate,function(event){var format='%M:%S';if(event.offset.hours>0){format='%H:'+format;}
if(event.offset.totalDays>0){if('en'==lang){format='D-%-D '+format;}else{format='J-%-D '+format;}}
if(event.offset.totalSecsLeft>0){$(this).html('<div class="countdown">'+event.strftime(format)+'</div>');}else{$(this).html('');}});}
$(document).mousemove(function(event){$xmouse=event.pageX;$ymouse=event.pageY;$imgwidth=231;$imgheight=321;$docwidth=window.innerWidth;$docheight=$(window).height();if($xmouse>$docwidth-$imgwidth-5+$(window).scrollLeft()&&$ymouse>$docheight-$imgheight-10+$(window).scrollTop()){$left=$xmouse-$imgwidth-20;$top=$ymouse-$imgheight-20;}
else if($ymouse>$docheight-$imgheight-10+$(window).scrollTop()){$left=$xmouse+20;$top=$ymouse-$imgheight-20;}
else if($xmouse>$docwidth-$imgwidth-10+$(window).scrollLeft()){$left=$xmouse-$imgwidth-20;$top=$ymouse+20;}
else{$left=$xmouse+20;$top=$ymouse+20;}
$("#popup").offset({left:$left,top:$top});});$('#form_valid_cart').on('submit',function(e){if($('#_lastname').val()==''||$('#_firstname').val()==''){var lang=$('#_lastname').data('lang');if('fr'==lang){document.getElementById('return_msg_form').innerHTML='<div class="bag-red">Veuillez indiquer votre nom et votre prénom</div>';}else if($lang=='en'){document.getElementById('return_msg_form').innerHTML='<div class="bag-red">Please state your first and last names</div>';}
e.preventDefault();}else{return true;}});$('#form_valid_cart_long').on('submit',function(e){if($('#_lastname').val()==''||$('#_firstname').val()==''||$('#_address').val()==''||$('#_postcode').val()==''||$('#_city').val()==''||$('#_country').val()==''||$('#_phone').val()==''){var lang=$(this).data('lang');if('fr'==lang){document.getElementById('return_msg_form').innerHTML='<div class="bag-red">Les champs obligatoires doivent être remplis</div>';}else if('en'==lang){document.getElementById('return_msg_form').innerHTML='<div class="bag-red">All mandatory fields must be completed</div>';}
e.preventDefault();}else{return true;}});$('.verif_form_laposte').on('submit',function(e){if($('#_address').val().length>35){$('#_address').css('background','#f1b4b4');e.preventDefault();}else{return true;}});$('#form_checked').on('submit',function(e){var page=$(this).data('page');var lang=$(this).data('lang');if($('input[name="choice_'+page+'"]:checked').length){return true;}else{if('fr'==lang){if(page=='shipping'){document.getElementById('return_msg_form').innerHTML='<div class="bag-red">Veuillez sélectionner un mode de livraison</div>';}else if(page=='paiement'){document.getElementById('return_msg_form').innerHTML='<div class="bag-red">Veuillez sélectionner un mode de paiement</div>';}}else if('en'==lang){if(page=='shipping'){document.getElementById('return_msg_form').innerHTML='<div class="bag-red">Please select a shipping method</div>';}else if(page=='paiement'){document.getElementById('return_msg_form').innerHTML='<div class="bag-red">Please select a payment method</div>';}}
console.log('coucou');e.preventDefault();}});function validateEmail(email){var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(email);}
$('#check_agree').change(function(){if($(this).is(':checked')&&!$('#no_scan_ID').length){$('.btn_payer').prop('disabled',false);$('.btn_payer').removeClass('btn_disabled');}else{$('.btn_payer').prop('disabled',true);$('.btn_payer').addClass('btn_disabled');}});$('.spoiler-text').hide();$('.spoiler-toggle').click(function(){$(this).next().toggle();});$('.api_alert_link').click(function(e){e.preventDefault();var element=$(this);element.removeClass('api_standby').addClass('api_loading');element.html('<img src="/img/style/loading_spinner.gif" alt="Chargement" width="16" height="16" loading="lazy" >');$.ajax({url:$(this).attr('href'),type:'GET',error:function(){element.html('');element.removeClass('api_loading').addClass('api_error');},success:function(input){var data=JSON.parse(input);element.html('');if(data.status==='error'){element.removeClass('api_loading').addClass('api_error');}else{element.removeClass('api_loading').addClass('api_success');}}})});$('select.multiple-select').multipleSelect({placeholder:'Rechercher par langue',formatSelectAll:function(){return 'Tout sélectionner'},formatAllSelected:function(){return 'Toutes langues sélectionnées'},formatCountSelected:function(count,total){return count+'/'+total+'sélectionnés'},formatNoMatchesFound:function(){return 'Aucun résultat trouvé'},width:'350px'});$('select#pimp_name').select2({language:"fr",placeholder:"Rechercher une carte par nom",minimumInputLength:3,allowClear:true,width:'350px',ajax:{url:'/api/get_card_names.php',dataType:'json',data:function(params){var query={term:params.term,page:params.page||1};return query;},processResults:function(data){return{results:data.products,pagination:{more:data.more}};}}});$('select#pimp_name_family').select2({language:"fr",placeholder:"Rechercher une carte par nom",minimumInputLength:3,allowClear:true,width:'350px',ajax:{url:'/api/get_card_names.php',dataType:'json',data:function(params){var query={term:params.term,page:params.page||1,family:$('select#pimp_name_family').data('family'),};return query;},processResults:function(data){return{results:data.products,pagination:{more:data.more}};}}});$('select#pimp_illustrator').select2({language:"fr",placeholder:"Rechercher une carte par illustrateur",minimumInputLength:3,allowClear:true,width:'350px',ajax:{url:'/api/get_card_illustrators.php',dataType:'json',data:function(params){var query={term:params.term,page:params.page||1};return query;},processResults:function(data){return{results:data.products,pagination:{more:data.more}};}}});$('.view_cart').click(function(e){$.post('/api/google_analytics.php',{},function(res){res=JSON.parse(res);gtag('event','view_cart',{currency:res.currency,value:res.value,items:res.items,})});})
$('.begin_checkout').click(()=>{$.post('/api/google_analytics.php',{},function(res){res=JSON.parse(res);gtag('event','begin_checkout',{currency:res.currency,value:res.value,items:res.items})});})
$('.remove_item_from_cart').click(function(e){let id_product=$(this).data('id')
let id_localisation=$(this).data('localisation')
let qty=$(this).data('qty')
$.post('/api/google_remove_cart.php',{id_product:id_product,id_localisation:id_localisation,quantity:qty},function(res){res=JSON.parse(res);gtag('event','remove_from_cart',{currency:res.currency,value:res.value,items:res.items})});})
$('.remove_from_cart').click(function(e){let id_localisation=$(this).data('localisation')
$.post('/api/google_remove_cart.php',{id_localisation:id_localisation},function(res){res=JSON.parse(res);gtag('event','remove_from_cart',{currency:res.currency,value:res.value,items:res.items})});})
if(window.location.pathname=="/order/order.php"){$.post("/api/google_analytics.php",{},function(res){res=JSON.parse(res);dataLayer.push({event:'add_shipping_info',eventModel:{currency:res.currency,value:res.value,coupon:res.coupon,shipping_tier:res.shipping_tier,items:res.items}})});}
if(window.location.pathname=="/user/list_order.php"){let url=new URL(window.location.href)
let search_params=new URLSearchParams(url.search)
if(search_params.has('ids')){let orders=search_params.get('ids').split(',')
orders.forEach(order=>{$.post("/api/google_analytics.php",{id_order:order,event:"purchase"},function(res){res=JSON.parse(res);if(res.google_tracking==0){dataLayer.push({event:'purchase',eventModel:{transaction_id:res.transaction_id,value:res.value,shipping:res.shipping,currency:res.currency,coupon:res.coupon,items:res.items}})}});})}}
if(window.location.pathname=="/user/order.php"){let url=new URL(window.location.href)
let search_params=new URLSearchParams(url.search)
if(search_params.has('id')){let id_order=search_params.get('id')
$.post("/api/google_analytics.php",{id_order:id_order,event:"purchase"},function(res){res=JSON.parse(res);if(res.google_tracking===0){dataLayer.push({event:'purchase',eventModel:{transaction_id:res.transaction_id,value:res.value,shipping:res.shipping,currency:res.currency,coupon:res.coupon,items:res.items}})}});}}
if(window.location.href.includes("play-in.com/produit/")){let id_product=$('#container_present_product').data('id')
$.post("/api/google_view_product.php",{id_product:id_product},function(res){res=JSON.parse(res);dataLayer.push({event:'view_item',eventModel:{value:res.value,currency:res.currency,items:res.items}})});}
if(window.location.href.includes("/carte/")){let id_card=$('.container_present_card').data('card')
if(id_card){$.post("/api/google_view_product.php",{id_card:id_card},function(res){res=JSON.parse(res);dataLayer.push({event:'view_item',eventModel:{value:res.value,currency:res.currency,items:res.items}})});}}
$('.add_payment_info').click(()=>{const checkboxes=document.querySelectorAll('.checkbox_paiement')
let id_payment=0
checkboxes.forEach(checkbox=>{if(checkbox.checked){id_payment=checkbox.value}})
if($('.total_voucher_cart').data('vouchers')>=$('#google_total_remaining').data('amount')){id_payment=8}
$.post('/api/google_analytics.php',{id_payment:id_payment},function(res){res=JSON.parse(res);gtag('event','add_payment_info',{currency:res.currency,value:res.value,coupon:res.coupon,payment_type:res.payment_type,items:res.items})});})
$('.addToCart').click(function(e){e.preventDefault();var container=$(this);if(container.prop('disabled')===false){if($(this).closest(".form_secondhand").length<=0){container.prop('disabled',true);}
if($('input[name=secondhand]:checked').val()==undefined){var id_product=$(this).data('id');}else{var id_product=$('input[name=secondhand]:checked').val();}
var id_localisation=$(this).data('localisation');var form=$(this).parents('form:first');var qty=form.children('select[name="qty_product"]').val();var button=$(this).children('.add_cart_logo_mini, .add_cart_btn_img');if($(this).closest(".form_secondhand").length<=0){button.addClass('cart_loading').html('<img src="/img/style/loading_spinner.gif" alt="Chargement" width="16" height="16" loading="lazy" >');}
$.post('/api/cart_add.php',{id:id_product,qty:qty,id_localisation:id_localisation},function(data){data=JSON.parse(data);var qty_add=data.qty_add;var totalCartSelector='#value_total_cart';var nbCartSelector='.nbr_article_in_order';var freeShippingAmountSelector="#free_shipping_amount";var freeShippingMissing=parseInt($(freeShippingAmountSelector).html());freeShippingMissing-=data.finalPrice;if(freeShippingMissing<0){freeShippingMissing=0;}
if(freeShippingMissing===0){if(data.lang==='fr'){$(freeShippingAmountSelector).parent().html('Vous bénéficiez des frais de ports offerts sur votre panier !');}else{$(freeShippingAmountSelector).parent().html('You are eligible for free shipping!');}}
$(freeShippingAmountSelector).html(freeShippingMissing.toFixed(2));var newCartPrice=parseFloat(data.totalPrice);$(totalCartSelector).html(newCartPrice.toFixed(2));var oldCartCount=parseInt($(nbCartSelector).html());var newCartCount=oldCartCount+parseInt(data.qty_add);$(nbCartSelector).html(newCartCount);$(nbCartSelector).data('total',newCartCount);$('.cart_top_img').effect('shake',{'distance':7});var msg_error=data.msg_error;if(msg_error){$('html,body').animate({scrollTop:0},100);}
$('#header_error_update_qty_item').html(msg_error);button.removeClass('cart_loading').html('');container.prop('disabled',false);gtag("event","add_to_cart",{currency:"EUR",value:Math.floor(data.finalPrice*100)/100,items:[{item_id:data.productId,item_name:data.productName,affiliation:id_localisation,discount:data.productDiscount,item_brand:data.item_brand,item_category:data.family,item_category2:data.category,price:Math.floor(data.price*100)/100,quantity:parseInt(qty_add)}]})});$('#popupForm').hide();$('#info_valid_cart').show();setTimeout(function(){$('#popupForm').show();$('#info_valid_cart').hide();$('#container_secondhand').css("width","0%");$('#container_secondhand').css("display","none");},1500);}});$('.moveCartItem').click(function(e){e.preventDefault();var container=$(this);if(container.prop('disabled')===false){container.prop('disabled',true);$.post('/api/cart_move_product.php',{id:$(this).data('id'),id_localisation:$(this).data('localisation'),qty:$(this).data('qty')},function(data){window.location=window.location.href;});}});$('[name="addToCartSell"]').click(function(e){e.preventDefault();var container=$(this);if(container.prop('disabled')===false){container.prop('disabled',true);var form=$(this).parents('form:first');var qty=form.children('select[name="qty_product"]').val();if(qty===undefined){var qty=form.children('input[name="qty_product"]').val();}
var id_secondhand=form.children('select[name="state"]').val();var button=$(this).children('.logo_cart_sell_mini');$('.sell_top').show();button.addClass('cart_loading').html('<img src="/img/style/loading_spinner.gif" alt="Chargement" width="16" height="16" loading="lazy" >');$.post('/api/cart_sell_add.php',{id:$(this).attr('data-id'),qty:qty,id_secondhand:id_secondhand},function(data){data=JSON.parse(data);var totalCartSelector="#total_cart_sell_header";var oldCartPrice=parseFloat($(totalCartSelector).html());var newCartPrice=oldCartPrice+parseFloat(data.totalPrice);$(totalCartSelector).html(newCartPrice.toFixed(2));$('.sell_top_img').effect('shake',{'distance':7});}).done(function(){$.post('/api/cart_sell_update_recap.php',function(data){$('.container_sell_cart').html(data);button.removeClass('cart_loading').html('');container.prop('disabled',false);})});}});$(function(){let country_selector=$('#_country');let country=country_selector.val();if(country!="69"){$('#state_container').show();}
country_selector.change(function(){let country=$(this).val();if(country!="69"){$('#state_container').show();}else{$('#state_container').hide();}});});$('.showStoreSelect').click(function(e){$('#container_secondhand').css("width","0%");$('#container_secondhand').css("display","none");let Modal_id=$(this).attr("data-modal-type");let Modal=$("#modal-window");if(Modal_id!=='modal-window'){$("#"+Modal_id).fadeIn(250);}else{Modal.fadeIn(250);}
$('html, body').css('overflow','hidden');});$(document).keyup(function(e){if(e.keyCode==27){$(".store_nav").fadeOut(250);$('html, body').css('overflow','auto');}});$(".store_nav, .close").click(function(e){$(".store_nav").fadeOut(250);$('html, body').css('overflow','auto');});$('.newsletter_offer').click(function(e){let optin=($('#commercial_offer_true').is(":checked")?1:0);$.post('/api/newsletter.php',{newsletter:$(this).attr('value'),optin:optin});$(this).prop("checked",true);if($(this).attr('id')=='newsletter_false'){$('#newsletter_true').prop("checked",false);}else if($(this).attr('id')=='newsletter_true'){$('#newsletter_false').prop("checked",false);}});$('.commercial_offer').click(function(e){let newsletter=($('#newsletter_true').is(":checked")?1:0);if(newsletter==0){newsletter=($('#newsletter_statut').attr('value'));}
console.log(newsletter);$.post('/api/newsletter.php',{optin:$(this).attr('value'),newsletter:newsletter});$(this).prop("checked",true);if($(this).attr('id')=='commercial_offer_false'){$('#commercial_offer_true').prop("checked",false);}else if($(this).attr('id')=='commercial_offer_true'){$('#commercial_offer_false').prop("checked",false);}});let parentClass=''
if(window.location.pathname.includes("/produit/")){if(window.innerWidth<1023){parentClass='.col_bottom_mobile '}else{parentClass='.col_bottom_desktop '}}
$('.star').click(function(){$(this).prevAll().addBack().addClass('img_star_full');$(this).prevAll().addBack().removeClass('img_star_empty');$(this).nextAll().removeClass('img_star_full');$(this).nextAll().addClass('img_star_empty');$('.rating_score').addBack().attr('value',0);});$('.rg1').click(function(e){$(parentClass+'.rating1_'+$(this).data('id')).addBack().attr('value',1);});$('.rg2').click(function(e){$(parentClass+'.rating2_'+$(this).data('id')).addBack().attr('value',1);});$('.rg3').click(function(e){$(parentClass+'.rating3_'+$(this).data('id')).addBack().attr('value',1);});$('.rg4').click(function(e){$(parentClass+'.rating4_'+$(this).data('id')).addBack().attr('value',1);});$('.rg5').click(function(e){$(parentClass+'.rating5_'+$(this).data('id')).addBack().attr('value',1);});$('.submit_rating').click(function(e){if(($(parentClass+'.rating1_'+$(this).data('id')).attr('value')===0)&&($(parentClass+'.rating2_'+$(this).data('id')).attr('value')===0)&&($(parentClass+'.rating3_'+$(this).data('id')).attr('value')===0)&&($(parentClass+'.rating4_'+$(this).data('id')).attr('value')===0)&&($(parentClass+'.rating5_'+$(this).data('id')).attr('value')===0)){$(parentClass+'.warning_star_'+$(this).data('id')).html("Veuillez attribuer une note au produit.");}
else if($(parentClass+'.container_rating_name_update_'+$(this).data('id')).length===1&&($(parentClass+'.lastname_update_'+$(this).data('id')).val().trim().length<1||$(parentClass+'.firstname_update_'+$(this).data('id')).val().trim().length<1)){if($(parentClass+'.lastname_update_'+$(this).data('id')).val().trim().length<1){$(parentClass+'.warning_lastname_'+$(this).data('id')).html("Veuillez indiquer votre nom.");}
if($(parentClass+'.firstname_update_'+$(this).data('id')).val().trim().length<1){$(parentClass+'.warning_firstname_'+$(this).data('id')).html("Veuillez indiquer votre prénom.");}}
else if($(parentClass+'.textarea_rating_'+$(this).data('id')).val()?.trim().length>1&&$(parentClass+'.textarea_rating_'+$(this).data('id')).val().length<25){$(parentClass+'div.warning_textarea_'+$(this).data('id')).html("Un commentaire doit contenir au minimum 25 caractères.");}else if(!$(parentClass+'.terms_use_'+$(this).data('id')).prop('checked')){$(parentClass+'.warning_terms_'+$(this).data('id')).html("Veuillez accepter les conditions d'utilisations.");}else{$(parentClass+'.post_rating_'+$(this).data('id')).submit();}});$('.submit_rating_update').click(function(e){if(($('.rating1_'+$(this).data('id')).attr('value')===0)&&($('.rating2_'+$(this).data('id')).attr('value')===0)&&($('.rating3_'+$(this).data('id')).attr('value')===0)&&($('.rating4_'+$(this).data('id')).attr('value')===0)&&($('.rating5_'+$(this).data('id')).attr('value')===0)){$('.warning_star_'+$(this).data('id')).html("Veuillez attribuer une note au produit.");}else if($('.textarea_rating_'+$(this).data('id')).val()?.trim().length>1&&$('.textarea_rating_'+$(this).data('id')).val().length<25){$('.warning_textarea_'+$(this).data('id')).html("Un commentaire doit contenir au minimum 25 caractères.");}else{$('.post_rating_update_'+$(this).data('id')).submit();}});$('.rating_toggle_button').click(function(){$('#'+$(this).data("target")).toggle();});$('div.btn_more_content').click(function(e){$('span#dots_comment_'+$(this).data('id')).toggle();$('div#btn_more_'+$(this).data('id')).toggle();$('span#read_more_'+$(this).data('id')).toggle();$('div#btn_less_'+$(this).data('id')).toggle();});$('div.btn_less_content').click(function(e){$('span#dots_comment_'+$(this).data('id')).toggle();$('div#btn_more_'+$(this).data('id')).toggle();$('span#read_more_'+$(this).data('id')).toggle();$('div#btn_less_'+$(this).data('id')).toggle();});maxPage=$('div.each_pagination').length/2;actualPage=1;$('.each_pagination:first-child').addClass('active');function showPageNumber(actualPage,maxPage){$('.bloc_selector').html(actualPage+' / '+maxPage);}
showPageNumber(actualPage,maxPage);$('.pagination_next').click(function(e){$('.container_page_rating').find('.each_pagination.active').next().addClass('active');$('.container_page_rating').find('.each_pagination.active').prev().removeClass('active');actualPage++;if(actualPage>maxPage){actualPage=maxPage}
showPageNumber(actualPage,maxPage);});$('.pagination_prev').click(function(e){$('.container_page_rating').find('.each_pagination.active').prev().addClass('active');$('.container_page_rating').find('.each_pagination.active').next().removeClass('active');actualPage--;if(actualPage<1){actualPage=1;}
showPageNumber(actualPage,maxPage);});$('.pagination_first').click(function(e){$('.each_pagination').removeClass('active');$('.each_pagination:first-child').addClass('active');actualPage=1;showPageNumber(actualPage,maxPage);});$('.pagination_last').click(function(e){$('.each_pagination').removeClass('active');$('.each_pagination:last-child').addClass('active');actualPage=maxPage;showPageNumber(actualPage,maxPage);});$(document).click(function(event){var container=$(".payment_n_time");if(!container.is(event.target)&&!container.has(event.target).length){$(".boxTogglePopupPaymentNTime").removeClass('show');$(".boxTogglePopupPaymentNTime").addClass('hide');}});$(document).click(function(event){var container=$(".container_recap_fidelity");if(!container.is(event.target)&&!container.has(event.target).length){$(".boxTogglePopupFidelity").removeClass('show');$(".boxTogglePopupFidelity").addClass('hide');}});$('#new_ID').change(function(){if(this.files[0].size>3145728){alert("Le fichier ne doit pas dépasser 3Mo");}});$(document).click(function(event){var target=$(event.target);if(!target.closest('#popup_secondhand').length&&!target.closest('#button_secondhand').length&&!target.closest('.addToCart').length){$('#container_secondhand').css("width","0%");$('#container_secondhand').css("display","none");$('html, body').css('overflow','auto');}});$('#button_secondhand').click(function(){$('#container_secondhand').css("width","100%");$('#container_secondhand').css("display","block");$('#container_secondhand').fadeIn(1000);$('html, body').css('overflow','hidden');});$('.select_secondhand').change(function(){var id_product=$(this).val();$('#popup_secondhand .addToCart').data('id',id_product);});$('.secondhand_bloc').hover(function(){console.log('haha')
$('#popup_secondhand_'+$(this).data('target')).css("display","block")},function(){console.log('hoho')
$('#popup_secondhand_'+$(this).data('target')).css("display","none")})});})(jQuery);